angular.module("meanApp",["ui.router","ngAnimate","ngResource","ngMaterial","md.data.table","ngCart","ngRoute","google.places","ngDialog","ngMdIcons"]).config(function(e,t,o){e.theme("default").primaryPalette("teal").accentPalette("orange"),t.state("app",{url:"/",views:{header:{templateUrl:"views/partials/header.html",controller:"HeaderController"},content:{templateUrl:"views/home.html",controller:"HomeController"},footer:{templateUrl:"views/partials/footer.html"}}}).state("app.market",{url:"market",views:{"content@":{templateUrl:"views/market.html",controller:"MarketController"}}}).state("app.market.new",{url:"/new",templateUrl:"views/partials/newItem.tpl.html",controller:"newItemCtrl as vm"}).state("app.market.edit",{url:"/:id/edit",templateUrl:"views/partials/editItem.tpl.html",controller:"editItemCtrl as vm",params:{item:null}}).state("app.item",{url:"market/:id",views:{"content@":{templateUrl:"views/item.html",controller:"ItemController"}}}).state("app.checkout",{url:"/checkout",views:{"content@":{templateUrl:"views/products-checkout.html",controller:"CheckoutController"}}}).state("app.blog",{url:"blog",views:{"content@":{templateUrl:"views/blog.html",controller:"BlogController"}}}).state("app.post",{url:"blog/:id",views:{"content@":{templateUrl:"views/post.html",controller:"PostController"}}}).state("app.tests",{url:"tests/",views:{"content@":{templateUrl:"views/tests.html",controller:""}}}),o.otherwise("/")}),angular.module("meanApp").controller("HomeController",["$scope",function(e){e.links=[{src:"./images/pr1.jpg",alt:"kekeke",caption:"Арт-терапія, яка безболісно допомагає в складних ситуаціях",description:"Арттерапія Бла-ла-ла"},{src:"./images/rp2.jpg",alt:"",caption:"Допоможемо зберігти душевну рівновагу",description:"Допомога кваліфікованного психолога"},{src:"./images/pr3.jpg",alt:"",caption:"Не дамо зруйнувати себе з середини",description:"блалаллааа"}]}]).controller("MarketController",["$scope","$stateParams","$mdDialog","$mdToast","AuthFactory","MarketFactory","$state","ngDialog",function(e,t,o,n,r,a,i,s){function l(e){n.show(n.simple().content(e).position("top, right").hideDelay(3e3))}e.isAdmin=r.isAdmin(),e.items=a.query(function(t){e.items=t},function(t){e.message="Error: "+t.status+" "+t.statusText}),e.$on("saveItem",function(t,o){e.items.push(o)}),e.openSidebar=function(){i.go("app.market.new")},e.editItem=function(t){e.editing=!0,e.sidebarTitle="Редактировать Товар",e.item=t,i.go("app.market.edit",{id:t._id,item:t})},e.user=r.getUsername(),e.delete=function(t,n){var r=o.confirm().title("Вы действительно хотите удалить "+n.title+"?").ok("Да").cancel("Нет").targetEvent(t);o.show(r).then(function(){var t=e.items.indexOf(n);a.delete({id:n._id},function(o){e.items.splice(t,1)}),l(n.title+" удалён!")},function(){})}}]).controller("newItemCtrl",["$scope","$state","$mdSidenav","$timeout","$mdDialog","MarketFactory","AuthFactory",function(e,t,o,n,r,a,i){function s(){c.sidenavOpen=!1}function l(e){e.title&&""!==e.title&&(a.update({title:e.title,description:e.description,price:e.price,image:e.photo,stock:e.stock}),t.go("app.market",{},{reload:!0}),e.title="",e.description="",e.price="",e.photo="",e.stock="")}var c=this;e.item={},c.closeSidebar=s,c.saveItem=l,n(function(){o("new").open()}),e.$watch("vm.sidenavOpen",function(e){e===!1&&o("new").close().then(function(){t.go("app.market")})})}]).controller("editItemCtrl",function(e,t,o,n,r,a){function i(){l.item={},t.sidenavOpen=!1}function s(e){t.sidenavOpen=!1,a.update({id:e._id},e)}var l=this;l.closeSidebar=i,l.saveEdit=s,l.sidebarTitle="Редактировать Товар",l.item=e.params.item,r(function(){o("edit").open()}),t.$watch("sidenavOpen",function(t){t===!1&&o("left").close().then(function(){e.go("app.market")})})}).controller("ItemController",["$scope","AuthFactory","MarketFactory","$stateParams",function(e,t,o,n){e.item={},e.message="Loading ...",e.item=o.get({id:n.id}).$promise.then(function(t){e.item=t},function(t){e.message="Error: "+t.status+" "+t.statusText})}]).controller("BlogController",["$scope","BlogFactory","$state","$mdDialog","PostFactory","AuthFactory","$mdToast","$stateParams",function(e,t,o,n,r,a,i,s){function l(e){i.show(i.simple().content(e).position("top, right").hideDelay(3e3))}e.isAdmin=a.isAdmin(),e.auth=a.isAuthenticated();t.query(function(t){e.posts=t},function(t){e.message="Error: "+t.status+" "+t.statusText});e.user=a.getUsername(),e.addPost=function(n){n.title&&""!==n.title&&(t.save({id:s.id},n),o.go(o.current,{},{reload:!0}),e.title="",e.content="")},e.deletePost=function(o,r){var a=n.confirm().title("Вы действительно хотите удалить "+r.title+"?").ok("Да").cancel("Нет").targetEvent(o);n.show(a).then(function(){var o=e.posts.indexOf(r);t.delete({id:r._id},function(t){e.posts.splice(o,1)}),l(r.title+" удалён!")},function(){})},e.sizeOf=function(e){return 1===Object.keys(e||{}).length?Object.keys(e||{}).length:Object.keys(e||{}).length>=5||0===Object.keys(e||{}).length?Object.keys(e||{}).length:2<=Object.keys(e||{}).length<=4?Object.keys(e||{}).length:void 0},e.incrementUpvotes=function(e){r.upvote(e).then(function(){o.go(o.current,{reload:!0})})},e.decrementUpvotes=function(e){r.downvote(e).then(function(e){o.go(o.current,{reload:!0})})}}]).controller("PostController",["$scope","$state","commentFactory","BlogFactory","PostFactory","AuthFactory","$stateParams","ngDialog",function(e,t,o,n,r,a,i,s){e.post={},e.post=n.get({id:i.id}).$promise.then(function(t){e.post=t},function(t){e.message="Error: "+t.status+" "+t.statusText}),e.user=a.getUsername(),e.auth=a.isAuthenticated(),e.mycomment={comment:""},e.addComment=function(){return""!==e.mycomment.comment&&void o.save({id:i.id},e.mycomment).$promise.then(function(){t.go(t.current,{},{reload:!0}),e.commentForm.$setPristine(),e.mycomment={comment:""}})},e.openLogin=function(){s.open({template:"views/login.html",scope:e,className:"ngdialog-theme-default",controller:"LoginController"})}}]).controller("CheckoutController",["$scope","$state","ngCart","orderFactory","$mdToast",function(e,t,o,n,r){function a(e){r.show(r.simple().content(e).position("top, right").hideDelay(3e3))}e.order={place:"",method:"",name:"",email:"",telephone:"",delivery:""},e.errors="";var i=o.getItems();e.totalCost=o.totalCost(),e.sendOrder=function(){n.save([i,e.totalCost,e.order]),a("Заказ сделан! C Вами свяжутся ближайшее время!"),e.order={place:"",method:"",name:"",email:"",telephone:"",delivery:""},e.orderForm.$setPristine(),e.showDetails=!1}}]).controller("HeaderController",["$scope","$state","$rootScope","ngDialog","AuthFactory","headerFactory","$mdSidenav","$timeout",function(e,t,o,n,r,a,i,s){e.isAuthenticated=r.isAuthenticated();var l=r.logout;e.isAuthenticated===!0&&s(l,6e6).then(function(){t.go(t.current,{},{reload:!0})}),e.openLeftMenu=function(){i("left").open()},e.phrase="",e.phrase=a.query(function(t){return e.phrases=t,e.phrase=e.phrases[Math.floor(Math.random()*e.phrases.length)]},function(t){e.message="Error: "+t.status+" "+t.statusText}),e.loggedIn=!1,e.username="",r.isAuthenticated()&&(e.loggedIn=!0,e.username=r.getUsername()),e.openLogin=function(){n.open({template:"views/partials/login.html",scope:e,className:"ngdialog-theme-default",controller:"LoginController"})},e.logOut=function(){r.logout(),e.loggedIn=!1,e.username="",t.go(t.current,{},{reload:!0})},o.$on("login:Successful",function(){e.loggedIn=r.isAuthenticated(),e.username=r.getUsername(),t.go(t.current,{},{reload:!0})}),o.$on("registration:Successful",function(){e.loggedIn=r.isAuthenticated(),e.username=r.getUsername()}),e.stateis=function(e){return t.is(e)}}]).controller("LoginController",["$scope","$state","ngDialog","$localStorage","AuthFactory",function(e,t,o,n,r){e.loginData=n.getObject("userinfo","{}"),e.doLogin=function(){e.rememberMe&&n.storeObject("userinfo",e.loginData),r.login(e.loginData),o.close(),t.go(t.current,{},{reload:!0})},e.openRegister=function(){o.open({template:"views/partials/register.html",scope:e,className:"ngdialog-theme-default",controller:"RegisterController"})}}]).controller("RegisterController",["$scope","ngDialog","$localStorage","AuthFactory",function(e,t,o,n){e.register={},e.loginData={},e.doRegister=function(){n.register(e.registration),t.close()}}]),function(){"use strict";angular.module("meanApp").directive("carousel",function(e){return{controller:"HomeController",restrict:"E",scope:{links:"="},templateUrl:"views/carousel.html",link:function(t,o){e(function(){$(".carousel-indicators li",o).first().addClass("active"),$(".carousel-inner .item",o).first().addClass("active")})}}}).directive("quiz",function(e){return{restrict:"AE",scope:{},templateUrl:"views/quiz.tpl.html",link:function(t,o,n){function r(){console.log(t.score),t.score<=5?t.result="Невысокая креативность \n Для повышения уровня профессиональной креативности необходимо развивать мышление и гибкость ума,\n находя различные альтернативные и новые методы решения поставленных задач.\n Если есть желание, то все получиться.":6<=t.score&&t.score<=12?t.result="Средняя креативность \n Нормальный уровень креативности.Если Вы реально креативный человек с высоким творчески потенциалом,\n то у Вас широкие возможности в профессиональной деятельности, в том числе руководящей.":13<t.score&&(t.result="Высокая креативность \n Высокий уровень креативности.Иногда слишком высокая креативность может вредить совместной деятельности,\n поэтому ее надо, иногда, держать в узде.Если же Вы работаете один, то у Вас большие перспективы...")}t.start=function(){t.id=0,t.quizOver=!1,t.inProgress=!0,t.getQuestion()},t.reset=function(){t.inProgress=!1,t.score=0},t.getQuestion=function(){var o=e.getQuestion(t.id);o?(t.question=o.question,t.options=o.options,t.answer=o.answer,t.answerMode=!0):(t.quizOver=!0,r())},t.checkAnswer=function(){if($("input[name=answer]:checked").length){var e=parseInt($("input[name=answer]:checked").val());e?(t.score+=e,t.correctAns=!0,t.nextQuestion()):(t.correctAns=!1,t.nextQuestion()),t.answerMode=!1}},t.nextQuestion=function(){t.id++,t.getQuestion()},t.reset()}}})}(),angular.module("meanApp").constant("baseURL","/").factory("headerFactory",["$resource","baseURL",function(e,t){return e(t+"phrases/",null,{update:{method:"PUT"}})}]).factory("MarketFactory",["$resource","baseURL",function(e,t){return e(t+"market/:id",{id:"@_id"},{update:{method:"PUT"}})}]).factory("BlogFactory",["$resource","baseURL",function(e,t){return e(t+"blog/:id",{id:"@_id",postId:"@_postId"},{update:{method:"PUT"}})}]).factory("orderFactory",["$resource","baseURL",function(e,t){return e(t+"checkout/",null,{update:{method:"PUT"}})}]).factory("commentFactory",["$resource","baseURL",function(e,t){return e(t+"blog/:id/comments/:commentId",{id:"@_id",commentId:"@_commentId"},{update:{method:"PUT"}})}]).factory("PostFactory",["$http","$state",function(e,t){var o={posts:[]};return o.upvote=function(t){return e.put("/blog/"+t._id+"/upvote",{id:"@_id"},{}).success(function(e){return e})},o.downvote=function(t){return e.put("/blog/"+t._id+"/downvote",null,{}).success(function(e){})},o.get=function(t){return e.get("/blog/"+t).then(function(e){return e.data})},o}]).factory("$localStorage",["$window",function(e){return{store:function(t,o){e.localStorage[t]=o},get:function(t,o){return e.localStorage[t]||o},remove:function(t){e.localStorage.removeItem(t)},storeObject:function(t,o){e.localStorage[t]=JSON.stringify(o)},getObject:function(t,o){return JSON.parse(e.localStorage[t]||o)}}}]).factory("AuthFactory",["$resource","$http","$localStorage","$rootScope","$window","baseURL","ngDialog",function(e,t,o,n,r,a,i){function s(){var e=o.getObject(p,"{}");void 0!=e.username&&c(e)}function l(e){o.storeObject(p,e),c(e)}function c(e){g=!0,f=e.username,h=e.token,m=e.admin,t.defaults.headers.common["x-access-token"]=h}function u(){h=void 0,f="",g=!1,t.defaults.headers.common["x-access-token"]=h,o.remove(p)}var m,d={},p="Token",g=!1,f="",h=void 0;return d.login=function(t){e(a+"users/login").save(t,function(e){l({username:t.username,token:e.token,admin:e.admin}),n.$broadcast("login:Successful")},function(e){g=!1;var t='                <div class="ngdialog-message">                <div><h3>Login Unsuccessful</h3></div><div><p>'+e.data.err.message+"</p><p>"+e.data.err.name+'</p></div><div class="ngdialog-buttons">                    <button type="button" class="ngdialog-button ngdialog-button-primary" ng-click=confirm("OK")>OK</button>                </div>';i.openConfirm({template:t,plain:"true"})})},d.logout=function(){e(a+"users/logout").get(function(e){}),u()},d.register=function(t){e(a+"users/register").save(t,function(e){d.login({username:t.username,password:t.password}),t.rememberMe&&o.storeObject("userinfo",{username:t.username,password:t.password}),n.$broadcast("registration:Successful")},function(e){var t='                <div class="ngdialog-message">                <div><h3>Registration Unsuccessful</h3></div><div><p>'+e.data.err.message+"</p><p>"+e.data.err.name+"</p></div>";i.openConfirm({template:t,plain:"true"})})},d.isAuthenticated=function(){return g},d.getUsername=function(){return f},d.isAdmin=function(){return m},s(),d}]).factory("quizFactory",function(){var e=[{question:"1. Вам предстоит пройти диагностический тест. Какую форму вопросов вы предпочтете?",options:[{name:"Выбор одного ответа из нескольких возможных (как в этом онлайн тесте)",value:1},{name:"Выбор ответа по типу: «да – нет», «согласен - не согласен»",value:0},{name:"Тест с самостоятельной формулировкой ответов",value:2}]},{question:"2. Затрудняясь в решении профессиональной проблемы, вы обращаетесь к эксперту. Какой помощи вы от него ждете?",options:[{name:"Подсказки, которая поможет вам принять решение",value:1},{name:"Дополнительной информации, которой Вы сами не располагаете",value:2},{name:"Инструкции, как Вам правильно поступить",value:0}]},{question:"3. Вы намерены посетить страну, в которой еще не бывали. Какой вариант путешествия вы предпочтете?",options:[{name:"Самостоятельное путешествие по собственному плану",value:2},{name:"Организованный тур с наличием достаточного свободного времени",value:1},{name:"Стандартный тур с осмотром достопримечательностей под руководством гида",value:0}]},{question:"4. Вам предстоит публичное выступление. Как вы намерены к нему подготовиться?",options:[{name:"Составите подробный конспект, который огласите близко к тексту",value:0},{name:"Составите развернутые тезисы, которыми будете руководствоваться",value:1},{name:"Обдумаете ключевую идею, которую экспромтом разовьете перед аудиторией",value:2}]},{question:"5. Каким, по-Вашему мнению, способом можно использовать карандаш?",options:[{name:"Его можно использовать множеством разных способов - и как украшение, и как указку, и даже как оружие",value:2},{name:"Тем, для которого он предназначен, - для письма и рисования",value:0},{name:"Если подумать, то им наверное можно воспользоваться не только для письма и рисования",value:1}]},{question:"6. Какое суждение Вы бы выбрали своим девизом?",options:[{name:"Либо я найду путь, либо проложу его!",value:2},{name:"Чтобы дойти до цели, надо прежде всего идти",value:1},{name:"Всё приходит к тому, кто умеет ждать",value:0}]},{question:"7. Знаете ли вы способ, каким можно потратить 1 гривну?",options:[{name:"Подать милостыню",value:1},{name:"Затрудняюсь ответить – по-моему, в наши дни на такие деньги ничего и не купишь",value:0},{name:"Есть, пожалуй, несколько способов – могу ими поделиться",value:2}]},{question:"За ограниченное время в незнакомом городе Вы успеваете осмотреть только одну достопримечательность. Какую?",options:[{name:"Галерею современного искусства",value:1},{name:"Выставку произведений местных народных умельцев",value:2},{name:"Знаменитый памятник старины",value:0}]}];return{getQuestion:function(t){return t<e.length&&e[t]}}});